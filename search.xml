<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ionic app 通过微信开发者平台方式增加分享功能]]></title>
    <url>%2F2019%2F03%2F16%2Fionic-app-%E9%80%9A%E8%BF%87%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%E8%80%85%E5%B9%B3%E5%8F%B0%E6%96%B9%E5%BC%8F%E5%A2%9E%E5%8A%A0%E5%88%86%E4%BA%AB%E5%8A%9F%E8%83%BD1%2F</url>
    <content type="text"><![CDATA[一、注册微信开发者账号获取appID 二、填写开发信息：安卓app的包名、应用签名和iOS的Bundle ID 1、包名是config.xml文件中,下面那段的”xx.xxx.xxxx”1234……&lt;widget id="xx.xxx.xxxx" version="1.0.1" xmlns="http://www.w3.org/ns/widgets" xmlns:cdv="http://cordova.apache.org/ns/1.0"&gt;…… 2、应用签名获取方式2.1 安装要添加分享功能的app 2.2 下载签名获取工具，安装。输入上面的包名获取即可。 3、iOS的Bundle ID看xcode文件中的项目属性即可。 三、安装微信分享插件cordova-plugin-wechat如果安装缓慢可以在命令前面加ionic ,建议直接从github上拉插件，因为之前作者发布有问题，导致一致报JSON error，找了作者协助才解决。123cordova plugin add https://github.com/xu-li/cordova-plugin-wechat --variable wechatappid=YOUR_WECHAT_APPIDcordova build ios or cordova build android 四、在config.xml文件中增加一段代码很重要！！看插件源码才发现的。1&lt;preference name="WECHATAPPID" value="YOUR_WECHAT_APPID" /&gt; 五、在native-service.ts（可自定义）增加分享方法。123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263import &#123; Injectable &#125; from '@angular/core';import &#123; AlertController, Loading, LoadingController, Platform, ToastController &#125; from 'ionic-angular';……declare var Wechat;……export class NativeService &#123; constructor( private platform: Platform, private alertCtrl: AlertController,) &#123; &#125; …… /** * 是否真机环境 */ isMobile(): boolean &#123; return this.platform.is('mobile') &amp;&amp; !this.platform.is('mobileweb'); &#125; shareWechat(scene) &#123; if (!this.isMobile()) &#123; this.alert('请使用手机app端分享'); return; &#125; Wechat.isInstalled(function (installed) &#123; if (installed) &#123; Wechat.share(&#123; message: &#123; title: "湛江手机台", description: "以新闻资讯为媒，致力打造一个资源共享的穿越于虚拟与现实之间的生活平台", thumb: "http://appadmin.zjwtv.com:9090/zjsjt.png", media: &#123; type: Wechat.Type.WEBPAGE, webpageUrl: "http://appadmin.zjwtv.com:9090/app" &#125; &#125;, scene: scene // share to Timeline &#125;, function () &#123; console.log("分享成功！") &#125;, function (reason) &#123; console.log("分享失败！" + reason) &#125;); &#125;else&#123; this.alert('请先安装微信'); &#125; &#125;, function (reason) &#123; console.log("分享失败！" + reason) &#125;); &#125; &#125; ……&#125; 六、新增app-share自定义组件，便于项目其他地方调用。 1ionic g component app-share app-share.html 12345678 &lt;!-- Generated template for the AppShareComponent component --&gt;&lt;div&gt; &lt;ion-buttons end&gt; &lt;button class="btn-share" ion-button clear (click)="share($event)"&gt; &lt;ion-icon name="md-share"&gt;&lt;/ion-icon&gt; &lt;/button&gt; &lt;/ion-buttons&gt;&lt;/div&gt; app-share.ts 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758 import &#123; Component &#125; from '@angular/core';import &#123; ActionSheetController &#125; from 'ionic-angular';import &#123; NativeService &#125; from '../../providers/native/native-service';/** * Generated class for the nativeServiceComponent component. * * See https://angular.io/api/core/Component for more info on Angular * Components. */@Component(&#123; selector: 'app-share', templateUrl: 'app-share.html'&#125;)export class AppShareComponent &#123; text: string; constructor( public actionSheetCtrl: ActionSheetController, public nativeService: NativeService ) &#123; console.log('Hello nativeServiceComponent Component'); this.text = 'Hello World'; &#125; share(event) &#123; console.log("当前页" + location.href); let actionSheet = this.actionSheetCtrl.create(&#123; title: '分享', buttons: [ &#123; cssClass: "weChatFriends", handler: () =&gt; &#123; this.nativeService.shareWechat(0) &#125; &#125;, &#123; cssClass: 'weChatMoments', handler: () =&gt; &#123; this.nativeService.shareWechat(1) &#125; &#125;, &#123; text: '取消', role: 'cancel', handler: () =&gt; &#123; console.log('Cancel clicked'); &#125; &#125; ] &#125;); actionSheet.present(); &#125;&#125; 在app.scss中增加样式，注意！一定要在app.scss中增加，否则不生效。123456789101112131415161718.weChatFriends &#123; margin-left: 10px; height: 64px; width: 64px; display:inline-block !important; color: red !important; background: url("../assets/imgs/icon64_wx_logo.png") no-repeat !important; &#125;.weChatMoments &#123; margin-left: 10px; height: 64px; width: 64px; display:inline-block !important; color: red !important; background: url("../assets/imgs/icon_res_download_moments.png") no-repeat !important;&#125; 在需要调用分享功能的页面html中引用即可123…… &lt;app-share&gt;&lt;/app-share&gt;…… 效果图如下所示]]></content>
      <tags>
        <tag>ionic</tag>
        <tag>微信开发者平台</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS 版app 开发记录]]></title>
    <url>%2F2019%2F03%2F04%2FiOS-%E7%89%88app-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[1 购买开发者账号填写正确的信息，申请地址https://developer.apple.com/ 2 创建证书购买完成后登陆https://developer.apple.com/，点击account.再点击下图位置。 详见：https://www.jianshu.com/p/304ec98842e1 3配置Xcode 证书环境将证书配置到Xcode 的code siging或者登陆选择automatic。 4项目的样式，针对iOS进行优化4.1 更改app.module.ts,将样式强制展示位iOS,方便调试。1234567891011121314imports: [ BrowserModule, IonicModule.forRoot(MyApp,&#123; iconMode: 'ios', //安卓icon强制使用ios的icon以及样式 mode: 'ios', //样式强制使用ios样式 （安卓的是'md'） // nativeControlsForTouch: false, backButtonText:'', backButtonIcon: 'ios-arrow-back'&#125;), HttpModule, HttpClientModule, IonicStorageModule.forRoot(),], 4.2修复图文、直播、点播页面样式异常。例如article-detail.css 通过调试发现高度改为210px。 123456.artc&#123; .scroll-content&#123; margin-top: 210px; &#125;&#125; 4.3 修复iOS 端自动进入全屏播放给 video 标签加上 playsinline（iOS 10及以上）、webkit-playsinline（iOS 10之前）这两个属性。另外还需要在 config.xml 文件中加上1&lt;preference name="AllowInlineMediaPlayback" value="true" /&gt; 4.4 修复iOS 播放有2个进度条问题删掉video标签中的controls 4.5 修复iOS app 打开后头部状态栏空白问题在config.xml文件中加上123&lt;preference name="StatusBarOverlaysWebView" value="false" /&gt;&lt;preference name="StatusBarStyle" value="default" /&gt;]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
</search>
